## ï¼ï¼ï¼åªæœ‰è¿™ä»½æ–‡ä»¶çš„ç«¯å£è®¾ç½®ä¼šéšClashXå¯åŠ¨ç”Ÿæ•ˆ
#---------------------------------------------------#

# HTTP ä»£ç†ç«¯å£
port: 7890

# SOCKS5 ä»£ç†ç«¯å£
socks-port: 7891

# Linux å’Œ macOS çš„ redir ä»£ç†ç«¯å£ (å¦‚éœ€ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œè¯·å–æ¶ˆæ³¨é‡Š)
redir-port: 7892


# Transparent proxy server port for Linux (TProxy TCP and TProxy UDP)
tproxy-port: 7893

# HTTP(S) and SOCKS4(A)/SOCKS5 server on the same port
mixed-port: 7893

# å…è®¸å±€åŸŸç½‘çš„è¿æ¥ï¼ˆå¯ç”¨æ¥å…±äº«ä»£ç†ï¼‰
allow-lan: true

#å¯ç”¨ipv6
ipv6: false

# è§„åˆ™æ¨¡å¼ï¼šGlobalï¼ˆå…¨å±€ä»£ç†ï¼‰/ Ruleï¼ˆè§„åˆ™ï¼‰ / Script(è…³æœ¬) / Directï¼ˆå…¨å±€ç›´è¿ï¼‰
mode: Rule

# è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ« (é»˜è®¤çº§åˆ«ï¼šsilentï¼Œå³ä¸è¾“å‡ºä»»ä½•å†…å®¹ï¼Œä»¥é¿å…å› æ—¥å¿—å†…å®¹è¿‡å¤§è€Œå¯¼è‡´ç¨‹åºå†…å­˜æº¢å‡ºï¼‰ã€‚
# 5 ä¸ªçº§åˆ«ï¼šsilent / info / warning / error / debugã€‚çº§åˆ«è¶Šé«˜æ—¥å¿—è¾“å‡ºé‡è¶Šå¤§ï¼Œè¶Šå€¾å‘äºè°ƒè¯•ï¼Œè‹¥éœ€è¦è¯·è‡ªè¡Œå¼€å¯ã€‚
log-level: silent

# clash çš„ RESTful API
external-controller: 127.0.0.1:9090

# æ‚¨å¯ä»¥å°†é™æ€ç½‘é¡µèµ„æºï¼ˆå¦‚ clash-dashboardï¼‰æ”¾ç½®åœ¨ä¸€ä¸ªç›®å½•ä¸­ï¼Œclash å°†ä¼šæœåŠ¡äº `${API}/ui`
# å‚æ•°åº”å¡«å†™é…ç½®ç›®å½•çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ã€‚
# external-ui: folder

# RESTful API çš„å£ä»¤ (å¯é€‰)
# secret: ""

# Outbound interface name
# interface-name: en0

# fwmark on Linux only
# routing-mark: 6666

#æµé‡å—…æ¢ï¼ŒåŒ…æ‹¬çº¯ipä¹Ÿå—…æ¢
sniffer:
  enable: true
  parse-pure-ip: true

#å‚¨å­˜fakeipæŸ¥è¯¢æŒä¹…åŒ–æé«˜æ€§èƒ½
profile:
  store-selected: true
  store-fake-ip: true

hosts:
  # '*.clash.dev': 127.0.0.1
  # '.dev': 127.0.0.1
  # 'alpha.clash.dev': '::1'

profile:
  # Store the `select` results in $HOME/.config/clash/.cache
  # set false If you don't want this behavior
  # when two different configurations have groups with the same name, the selected values are shared
  store-selected: true

  # persistence fakeip
  store-fake-ip: true


# DNS è®¾ç½®
dns:
 enable: true
 ipv6: false
 prefer-h3: true
 listen: 0.0.0.0:53

# default-nameserveråˆå«Bootstrap DNSï¼Œç”¨æ¥è§£é‡Šnameserver
 default-nameserver:
   - 119.29.29.29
   - 223.5.5.5

# å¢å¼ºæ¨¡å¼ï¼Œfake-ip or redir-hostï¼Œredir-hostä»2023.02.16ä¸å†å¯ç”¨
 enhanced-mode: fake-ip  


 
# Fake IP addresses pool CIDR
 fake-ip-range: 198.18.0.1/16

# lookup hosts and return IP record
# use-hosts: true

# fake ip white domain list, Always return real IP for increased compatibility
  fake-ip-filter:
    #LAN
    - "*.lan"
    - "*.localdomain"
    - "*.example"
    - "*.invalid"
    - "*.localhost"
    - "*.test"
    - "*.local"
    - "*.home.arpa"
    #æ”¾è¡ŒNTPæœåŠ¡
    - time.*.com
    - time.*.gov
    - time.*.edu.cn
    - time.*.apple.com
    - time-ios.apple.com
    - time1.*.com
    - time2.*.com
    - time3.*.com
    - time4.*.com
    - time5.*.com
    - time6.*.com
    - time7.*.com
    - ntp.*.com
    - ntp1.*.com
    - ntp2.*.com
    - ntp3.*.com
    - ntp4.*.com
    - ntp5.*.com
    - ntp6.*.com
    - ntp7.*.com
    - "*.time.edu.cn"
    - "*.ntp.org.cn"
    - "+.pool.ntp.org"
    - time1.cloud.tencent.com
    #æ”¾è¡Œç½‘æ˜“äº‘éŸ³ä¹
    - music.163.com
    - "*.music.163.com"
    - "*.126.net"
    #ç™¾åº¦éŸ³ä¹
    - musicapi.taihe.com
    - music.taihe.com
    #é…·ç‹—éŸ³ä¹
    - songsearch.kugou.com
    - trackercdn.kugou.com
    #é…·æˆ‘éŸ³ä¹
    - "*.kuwo.cn"
    #JOOXéŸ³ä¹
    - api-jooxtt.sanook.com
    - api.joox.com
    - joox.com
    #QQéŸ³ä¹
    - y.qq.com
    - "*.y.qq.com"
    - streamoc.music.tc.qq.com
    - mobileoc.music.tc.qq.com
    - isure.stream.qqmusic.qq.com
    - dl.stream.qqmusic.qq.com
    - aqqmusic.tc.qq.com
    - amobile.music.tc.qq.com
    #è™¾ç±³éŸ³ä¹
    - "*.xiami.com"
    #å’ªå’•éŸ³ä¹
    - "*.music.migu.cn"
    - music.migu.cn
    #win10æœ¬åœ°è¿æ¥æ£€æµ‹
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    #QQç™»å½•
    - localhost.ptlogin2.qq.com
    - localhost.sec.qq.com
    - "+.qq.com"
    - "+.tencent.com"
    #Game
    #Nintendo Switch
    - "+.srv.nintendo.net"
    - "*.n.n.srv.nintendo.net"
    - "+.cdn.nintendo.net"
    #Sony PlayStation
    - "+.stun.playstation.net"
    #Microsoft Xbox
    - xbox.*.*.microsoft.com
    - "*.*.xboxlive.com"
    - xbox.*.microsoft.com
    - xnotify.xboxlive.com
    #Wotgame
    - "+.battlenet.com.cn"
    - "+.wotgame.cn"
    - "+.wggames.cn"
    - "+.wowsgame.cn"
    - "+.wargaming.net"
    #Golang
    - proxy.golang.org
    #STUN
    - stun.*.*
    - stun.*.*.*
    - "+.stun.*.*"
    - "+.stun.*.*.*"
    - "+.stun.*.*.*.*"
    - "+.stun.*.*.*.*.*"
    #Linksys Router
    - heartbeat.belkin.com
    - "*.linksys.com"
    - "*.linksyssmartwifi.com"
    #ASUS Router
    - "*.router.asus.com"
    #Apple Software Update Service
    - mesu.apple.com
    - swscan.apple.com
    - swquery.apple.com
    - swdownload.apple.com
    - swcdn.apple.com
    - swdist.apple.com
    #Google
    - lens.l.google.com
    - stun.l.google.com
    - na.b.g-tun.com
    #Netflix
    - "+.nflxvideo.net"
    #FinalFantasy XIV Worldwide Server & CN Server
    - "*.square-enix.com"
    - "*.finalfantasyxiv.com"
    - "*.ffxiv.com"
    - "*.ff14.sdo.com"
    - ff.dorado.sdo.com
    #Bilibili
    - "*.mcdn.bilivideo.cn"
    #Disney Plus
    - "+.media.dssott.com"
    - shark007.net
    #Mijia
    - Mijia Cloud
    #æ‹›å•†é“¶è¡Œ
    - "+.cmbchina.com"
    - "+.cmbimg.com"
    #AdGuard
    - local.adguard.org
    #è¿…é›·
    - "+.sandai.net"
    - "+.n0808.com"
    #UU Plugin
    - "+.uu.163.com"
    - ps.res.netease.com
    - services.googleapis.cn
   

 nameserver:
   - https://223.5.5.5/dns-query
   - https://1.12.12.12/dns-query

# concurrent request with nameserver, fallback used when GEOIP country isn't CN
 fallback:
   - https://8.8.4.4/dns-query
   - https://1.0.0.1/dns-query

  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 0.0.0.0/8
      - 10.0.0.0/8
      - 100.64.0.0/10
      - 127.0.0.0/8
      - 169.254.0.0/16
      - 172.16.0.0/12
      - 192.0.0.0/24
      - 192.0.2.0/24
      - 192.88.99.0/24
      - 192.168.0.0/16
      - 198.18.0.0/15
      - 198.51.100.0/24
      - 203.0.113.0/24
      - 224.0.0.0/4
      - 240.0.0.0/4
      - 255.255.255.255/32
    domain:
      - "+.google.com"
      - "+.facebook.com"
      - "+.youtube.com"
      - "+.githubusercontent.com"
      - "+.googlevideo.com"
      - "+.msftconnecttest.com"
      - "+.msftncsi.com"

# Lookup domains via specific nameservers
 nameserver-policy:
  #'www.baidu.com': '114.114.114.114'
  #'+.internal.crop.com': '10.0.0.1'

# ä»£ç†èŠ‚ç‚¹
proxy-providers:
  ğŸ”:
    type: http
    path: ./proxy-providers/ğŸ”.yaml 
    url: "https://x.luxury/link/aNaDRb0xUaZNPBqg?clash=2"
    filter: (æ–°åŒ—)
    interval: 86400
    health-check:
        enable: true
        url: http://www.gstatic.com/generate_204
        interval: 86400


# ç­–ç•¥ç»„
proxy-groups:
  - name: ğŸ¶
    type: load-balance
    url: http://www.gstatic.com/generate_204
    interval: 1800
    strategy: consistent-hashing
    use:
      - ğŸ”

# url-test
#  -
#    name: ğŸ¶
#    type: url-test
#    url: http://www.gstatic.com/generate_204
#    interval: 1800
#    tolerance: 10
#    use:
#      - ğŸ”

#select æ‰‹åŠ¨é€‰æ‹©ï¼Œè¯¥ç»„åœ¨èŠ‚ç‚¹åˆ—è¡¨ä¸Šï¼Œæ‰‹åŠ¨é€‰æ‹©åˆ—è¡¨æˆ–è€… proxy-group
#url-test å»¶è¿Ÿæœ€ä½èŠ‚ç‚¹ï¼Œæµ‹è¯•è¯¥ç»„æ‰€æœ‰èŠ‚ç‚¹çš„å»¶è¿Ÿ
#fallback å›è½ï¼Œè¿æ¥è¯¥ç»„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸å¯ç”¨æ—¶åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
#load-balance è´Ÿè½½å‡è¡¡ï¼Œç”±è¯¥ç»„2ä¸ªä»¥ä¸Šçš„èŠ‚ç‚¹æä¾›é“¾æ¥
#     strategy:
#     consistent-hashing åŒä¸€ä¸ªåŸŸåä¸‹ä¼šæŒç»­ä½¿ç”¨åŒä¸€ä¸ªip, é»˜è®¤é€‰æ‹©è¯¥é¡¹ï¼Œé˜²æ­¢é¢‘ç¹è·³ipè¢«ç½‘ç«™ban
#     round-robin è½®è¯¢ï¼Œæ¯è®¿é—®ä¸€ä¸ªé“¾æ¥ï¼Œé¡ºåºæ›´æ¢èŠ‚ç‚¹è®¿é—®



rules:
##########è‡ªå®šä¹‰æ·»åŠ åŸŸå###########
#DOMAIN-SUFFIXï¼šåŸŸååç¼€åŒ¹é…      #
#DOMAINï¼šåŸŸååŒ¹é…                #
#DOMAIN-KEYWORDï¼šåŸŸåå…³é”®å­—åŒ¹é…   #
#IP-CIDRï¼šIPæ®µåŒ¹é…               #
#SRC-IP-CIDRï¼šæºIPæ®µåŒ¹é…         #
#GEOIPï¼šGEOIPæ•°æ®åº“ï¼ˆå›½å®¶ä»£ç ï¼‰åŒ¹é… #
#DST-PORTï¼šç›®æ ‡ç«¯å£åŒ¹é…           #
#SRC-PORTï¼šæºç«¯å£åŒ¹é…             #
#PROCESS-NAMEï¼šæºè¿›ç¨‹ååŒ¹é…       #
#RULE-SETï¼šRule Providerè§„åˆ™åŒ¹é… #
#MATCHï¼šå…¨åŒ¹é…                   #
################################


###################################
#å¦‚æœå­˜åœ¨ DPI æ£€æµ‹ï¼Œå¯ä»¥å°è¯•åŠ å…¥è¿™äº›è§„åˆ™#
# WeChat & QQ                     #
#- DST-PORT,80,PROXY ## TCP       #
#- DST-PORT,5222,PROXY            #
#- DST-PORT,5223,PROXY            #
#- DST-PORT,5228,PROXY            #
#- DST-PORT,8000,PROXY # UDP      #
#- DST-PORT,8001,PROXY # UDP      #
#- DST-PORT,8080,PROXY            #
#- DST-PORT,14000,PROXY           #
###################################


###########rules##############
  - RULE-SET,Advertising,REJECT
  - RULE-SET,AdvertisingMiTV,REJECT
  - RULE-SET,BlockHttpDNS,REJECT
  - RULE-SET,Apple,DIRECT
  - RULE-SET,Microsoft,DIRECT
  - RULE-SET,ChinaMax,DIRECT
  - GEOIP,LAN,DIRECT
  - MATCH,ğŸ¶


rule-providers:

  Advertising:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Advertising/Advertising_Classical_No_Resolve.yaml
    path: "./rule_provider/Advertising_Classical_No_Resolve.yaml"
    interval: 604800

  AdvertisingMiTV:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdvertisingMiTV/AdvertisingMiTV_No_Resolve.yaml
    path: "./rule_provider/AdvertisingMiTV_No_Resolve.yaml"
    interval: 604800

  BlockHttpDNS:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BlockHttpDNS/BlockHttpDNS_No_Resolve.yaml
    path: "./rule_provider/BlockHttpDNS_No_Resolve.yaml"
    interval: 604800

  Apple:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple_Classical_No_Resolve.yaml
    path: "./rule_provider/Apple_Classical_No_Resolve.yaml"
    interval: 604800

  Microsoft:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft_No_Resolve.yaml"
    path: ./ruleset/Microsoft_No_Resolve.yaml
    interval: 604800

  ChinaMax:
    type: http
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMax/ChinaMax_Classical_No_Resolve.yaml
    path: "./rule_provider/ChinaMax_Classical_No_Resolve.yaml"
    interval: 604800